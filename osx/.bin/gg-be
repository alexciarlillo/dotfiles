#!/bin/bash

# Tmux equivalent of gg-be WezTerm script
# Creates a 3-pane layout: gdsdev (top), ssdev (middle), terminal (bottom)

# Source the workspace helper
source ~/.dotfiles/universal/.config/tmux/tmux-workspace-helper

# Create workspace (window or session)
WINDOW=$(tmux_create_workspace "gg-be")
SESSION_NAME="gg-be" # Used for attach if outside tmux

# Start with the first pane (will become ssdev pane at bottom)
# We will make this 20 Lines
tmux split-window -t $WINDOW -v -l 20
# Now we have: pane 1 (top), pane 2 (bottom 20 lines)

# Split the top pane to create the middle pane (gdsdev 40 lines)
tmux split-window -t $WINDOW.1 -v -l 40

# Now we have: pane 1 (top), pane 3 (middle 40 lines), pane 2 (bottoms 20 lines)

# Set up the middle pane (gdsdev 40 lines)
# tmux send-keys -t $WINDOW.1 'gdsdev ' # Leave command ready
tmux send-keys -t $WINDOW.1 'gg' Enter
tmux send-keys -t $WINDOW.2 'gdsev ' # Leave command ready
tmux send-keys -t $WINDOW.3 'ssdev ' # Leave command ready

# Now we have: pane 0 (top gdsdev), pane 1 (middle ssdev), pane 2 (bottom terminal)

# Focus on the top pane (gdsdev)
tmux select-pane -t $WINDOW.3

# Attach to session if we're outside tmux
tmux_attach_if_outside "$SESSION_NAME"
